def dependsOnProjects = [
        ':d2v-axis-js',
        ':d2v-color-js',
        ':d2v-core-js',
        ':d2v-dsv-js',
        ':d2v-format-js',
        ':d2v-interpolate-js',
        ':d2v-random-js',
        ':d2v-request-js',
//        ':d2v-scale-js',
        ':d2v-svg-js',
        ':d2v-tile-js',
        ':d2v-timer-js',
        ':d2v-voronoi-js']

dependencies {

    dependsOnProjects.forEach {
        compile project(it)
    }
}

task populateNodeModules(type: Copy, dependsOn: compileKotlin2Js) {

    from compileKotlin2Js.destinationDir

    configurations.compile.each {
        from zipTree(it.absolutePath).matching { include '*.js' }
    }

    into "${buildDir}/node_modules"
}

build.dependsOn populateNodeModules

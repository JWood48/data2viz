def d2v = [
//        ":axis:d2v-axis-android",
//        ":axis:d2v-axis-common",
//        ":axis:d2v-axis-js",
//        ":axis:d2v-axis-jfx",

        ":d2v-chord",
        ":d2v-color",
        ":d2v-contour",
        ":d2v-core",

        ":d2v-delaunay",
//        ":delaunay:d2v-delaunay-js",
//        ":delaunay:d2v-delaunay-jvm",
//
//        ":dsv:d2v-dsv-common",
//        ":dsv:d2v-dsv-js",
//        ":dsv:d2v-dsv-jvm",
//
        ":d2v-ease",
        ":d2v-force",
        ":d2v-format",
        ":d2v-geo",
        ":d2v-hexbin",
        ":d2v-hierarchy",
        ":d2v-interpolate",
        ":d2v-quadtree",
        ":d2v-random",

//        ":request:d2v-request-common",
//        ":request:d2v-request-js",
//        ":request:d2v-request-jvm",
//
        ":d2v-sankey",
        ":d2v-scale",
//        ":scale:d2v-scale-android",
//        ":scale:d2v-scale-common",
//        ":scale:d2v-scale-js",
//        ":scale:d2v-scale-jvm",
        ":d2v-shape",
        ":d2v-tests",
        ":d2v-tile",
        ":d2v-time",
        ":d2v-time-format",
        ":d2v-timer",
//        ":d2v-transition",
//        ":d2v-viz",
        "d2v-voronoi"
]

System.setProperty("all_d2v", d2v.join(","))
d2v.forEach {
    includeAndFilter(it)
}

//[":data2viz:d2v-data2viz-common",
// ":data2viz:d2v-data2viz-js",
// ":data2viz:d2v-data2viz-jfx"].forEach{includeAndFilter(it)}

//includeAndFilter(":viz:rendering-app")

//if (include_js.toBoolean()) {
//    include ":site"
//}

def examples = [ 
//        ":app",
//
//        ":ex-chord",
//        ":ex-chord:ex-chord-common",
//        ":ex-chord:ex-chord-js",
//        ":ex-chord:ex-chord-jfx",
//
//        ":ex-events",
//        ":ex-events:ex-events-common",
//        ":ex-events:ex-events-js",
//        ":ex-events:ex-events-jfx",
//
//        ":ex-delaunay",
//        ":ex-delaunay:ex-delaunay-js",
//
//        ":ex-lets-make-a-barchart",
//        ":ex-lets-make-a-barchart:ex-lets-make-a-barchart-common",
//        ":ex-lets-make-a-barchart:ex-lets-make-a-barchart-js",
//        ":ex-lets-make-a-barchart:ex-lets-make-a-barchart-jfx",
//
//        ":ex-force",
//        ":ex-force:ex-force-common",
//        ":ex-force:ex-force-js",
//        ":ex-force:ex-force-jfx",
//
//        ":ex-full",
//        ":ex-full:ex-full-js",
//
//        ":ex-geo",
//        ":ex-geo:ex-geo-common",
//        ":ex-geo:ex-geo-js",
//        ":ex-geo:ex-geo-jfx",
//
//        ":ex-line-of-sight",
//        ":ex-line-of-sight:ex-line-of-sight-common",
//        ":ex-line-of-sight:ex-line-of-sight-js",
//        ":ex-line-of-sight:ex-line-of-sight-jfx",
//
//        ":ex-sankey",
//        ":ex-sankey:ex-sankey-common",
//        ":ex-sankey:ex-sankey-js",
//        ":ex-sankey:ex-sankey-jfx",
//
//        ":ex-streamGraph",
//        ":ex-streamGraph:ex-streamGraph-common",
//        ":ex-streamGraph:ex-streamGraph-js",
//        ":ex-streamGraph:ex-streamGraph-jfx",
//
]


rootProject.name = "data2vizandroid"

examples.forEach{
    def included = includeAndFilter(it)
    if (included)
        project(it).projectDir = "examples${it.replace(':', '/')}" as File
}

def includeAndFilter(project){
    if (project.endsWith("-android") || (project.endsWith("app"))) {
        if (include_android.toBoolean()) {
            include(project)
            return true
        }
        return false
    } else if (project.endsWith("-js")) {
        if (include_js.toBoolean()) {
            include(project)
            return true
        }
        return false
    } else if (project.endsWith("-jfx")) {
        if (include_jfx.toBoolean()) {
            include(project)
            return true
        }
        return false
    } else {
        include(project)
        return true
    }
}

enableFeaturePreview('GRADLE_METADATA')